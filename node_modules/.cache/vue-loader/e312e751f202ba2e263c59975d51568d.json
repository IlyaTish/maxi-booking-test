{"remainingRequest":"/Users/ilyatish/Projects/maxi-booking-test/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ilyatish/Projects/maxi-booking-test/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ilyatish/Projects/maxi-booking-test/src/App.vue","mtime":1602742303911},{"path":"/Users/ilyatish/Projects/maxi-booking-test/node_modules/cache-loader/dist/cjs.js","mtime":1581966828116},{"path":"/Users/ilyatish/Projects/maxi-booking-test/node_modules/babel-loader/lib/index.js","mtime":1587282321022},{"path":"/Users/ilyatish/Projects/maxi-booking-test/node_modules/cache-loader/dist/cjs.js","mtime":1581966828116},{"path":"/Users/ilyatish/Projects/maxi-booking-test/node_modules/vue-loader/lib/index.js","mtime":1602678030223}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmNvbnN0IGF4aW9zICAgICAgID0gcmVxdWlyZSgnYXhpb3MnKSwKICAgICAgcGFyc2VTdHJpbmcgPSByZXF1aXJlKCd4bWwyanMnKS5wYXJzZVN0cmluZwoKY29uc3QgZ2V0U291cmNlID0gKGFyciwgaW5kZXgsIGFyclRvUHVzaCwgY29udGV4dCkgPT4gewogIGNvbnNvbGUubG9nKCdSZXNwb25zZScpOwogIGF4aW9zCiAgICAuZ2V0KGFycltpbmRleF0sIHsKICAgICAgdGltZW91dDogNjAwMDAKICAgIH0pCiAgICAudGhlbihyZXMgPT4gewogICAgICBpZiAocmVzLmhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddID09PSAndGV4dC94bWwnKSB7CiAgICAgICAgcGFyc2VTdHJpbmcocmVzLmRhdGEsIChlcnIsIHJlc3VsdCkgPT4gewogICAgICAgICAgaWYgKHJlc3VsdC5WYWxDdXJzLlZhbHV0ZVsxMV0pIHsKICAgICAgICAgICAgY29udGV4dC4kc2V0KGNvbnRleHQudmFsdXRlc0RhdGFfeG1sLCAnRVVSJywgcmVzdWx0LlZhbEN1cnMuVmFsdXRlWzExXSkKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAocmVzdWx0LlZhbEN1cnMuVmFsdXRlWzEwXSkgewogICAgICAgICAgICBjb250ZXh0LiRzZXQoY29udGV4dC52YWx1dGVzRGF0YV94bWwsICdVU0QnLCByZXN1bHQuVmFsQ3Vycy5WYWx1dGVbMTBdKQogICAgICAgICAgfQogICAgICAgICAgYXJyVG9QdXNoLnB1c2gocmVzdWx0KQogICAgICAgICAgY29udGV4dC52YWx1dGVzRGF0YV94bWwubG9hZGVkID0gdHJ1ZQogICAgICAgIH0pCiAgICAgIH0KICAgICAgCiAgICAgIGVsc2UgewogICAgICAgIGlmIChyZXMuZGF0YS5WYWx1dGUuRVVSKSB7CiAgICAgICAgICBjb250ZXh0LiRzZXQoY29udGV4dC52YWx1dGVzRGF0YV9qc29uX2pzLCAnRVVSJywgcmVzLmRhdGEuVmFsdXRlLkVVUikKICAgICAgICB9CgogICAgICAgIGlmIChyZXMuZGF0YS5WYWx1dGUuVVNEKSB7CiAgICAgICAgICBjb250ZXh0LiRzZXQoY29udGV4dC52YWx1dGVzRGF0YV9qc29uX2pzLCAnVVNEJywgcmVzLmRhdGEuVmFsdXRlLlVTRCkKICAgICAgICB9CiAgICAgICAgYXJyVG9QdXNoLnB1c2gocmVzLmRhdGEpCiAgICAgIH0KICAgICAgY29udGV4dC52YWx1dGVzRGF0YV9qc29uX2pzLmxvYWRlZCA9IHRydWUKICAgIH0pCiAgICAKICAgIC5jYXRjaChlcnJvciA9PiB7CiAgICAgIGlmIChpbmRleCA8IGFyci5sZW5ndGggLSAxKSB7CiAgICAgICAgcmV0dXJuIGdldFNvdXJjZShhcnIsIGluZGV4ICsgMSwgYXJyVG9QdXNoLCBjb250ZXh0KTsKICAgICAgfQogICAgICB0aHJvdyBlcnJvcjsKICAgIH0pOwoKICBzZXRUaW1lb3V0KCgpID0+IHsKICAgIGdldFNvdXJjZShhcnIsIGluZGV4LCBhcnJUb1B1c2gsIGNvbnRleHQpCiAgfSwgMjAwMCkKfQoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdBcHAnLAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgaW50ZXJ2YWw6IG51bGwsCiAgICAgIGNvbW1vbkRhdGE6IHsKICAgICAgICBkYXRlOiAnJwogICAgICB9LAogICAgICB2YWx1dGVzRGF0YV94bWw6IHsKICAgICAgICBsb2FkZWQ6IGZhbHNlCiAgICAgIH0sCiAgICAgIHZhbHV0ZXNEYXRhX2pzb25fanM6IHsKICAgICAgICBsb2FkZWQ6IGZhbHNlCiAgICAgIH0sCiAgICAgIHNvdXJjZXNEYXRhOiBbXSwKICAgICAgc291cmNlczogWwogICAgICAgICdodHRwczovL3d3dy5jYnIteG1sLWRhaWx5LnJ1L2RhaWx5X3V0ZjgueG1sJywKICAgICAgICAnaHR0cHM6Ly93d3cuY2JyLXhtbC1kYWlseS5ydS9kYWlseV9qc29uLmpzJwogICAgICBdCiAgICB9CiAgfSwKCiAgbWV0aG9kczp7CiAgICBkYXRlRnVuY3Rpb246IChjb250ZXh0KSA9PiB7CiAgICAgIGNvbnN0IHRvZGF5ICAgICAgID0gbmV3IERhdGUoKSwKICAgICAgICAgICAgY3VycmVudERhdGUgPSB0b2RheS5nZXREYXRlKCkrJy4nKyh0b2RheS5nZXRNb250aCgpKzEpKycuJyt0b2RheS5nZXRGdWxsWWVhcigpOwoKICAgICAgY29udGV4dC5jb21tb25EYXRhLmRhdGUgPSBjdXJyZW50RGF0ZTsKICAgIH0KICB9LAoKICBtb3VudGVkOiBmdW5jdGlvbigpIHsKICAgIGNvbnN0IHNlbGYgPSB0aGlzOwoKICAgIGdldFNvdXJjZShzZWxmLnNvdXJjZXMsIDAsIHNlbGYuc291cmNlc0RhdGEsIHNlbGYpOwogICAgdGhpcy5kYXRlRnVuY3Rpb24oc2VsZikKICB9Cn0K"},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+EA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template lang='pug'>\n  #app\n    md-content\n      .md-content-wrapper\n        .md-card-wrapper\n          h2.md-title Курс евро (EUR)\n          md-card.md-with-hover\n            md-ripple\n              .md-layout\n                .md-layout-item\n                  span.md-subtitle Дата\n                  span.md-txt {{ commonData.date }}\n\n                .md-layout-item.charcode-col\n                  span.md-subtitle Код\n                  template(v-if='valutesData_xml.loaded')\n                    span.md-txt {{ valutesData_xml.EUR.CharCode[0] }}\n                  template(v-else-if='valutesData_json_js.loaded')\n                    span.md-txt {{ valutesData_json_js.EUR.CharCode }}\n                  template(v-else)\n                    span.md-txt EUR\n\n                .md-layout-item.nominal-col\n                  span.md-subtitle Номинал\n                  template(v-if='valutesData_xml.loaded')\n                    span.md-txt {{ valutesData_xml.EUR.Nominal[0] }}\n                  template(v-else-if='valutesData_json_js.loaded')\n                    span.md-txt {{ valutesData_json_js.EUR.Nominal }}\n                  template(v-else)\n                    span.md-txt -\n\n                .md-layout-item.value-col\n                  span.md-subtitle Курс\n                  template(v-if='valutesData_xml.loaded')\n                    span.md-txt.bold {{ valutesData_xml.EUR.Value[0] }}\n                  template(v-else-if='valutesData_json_js.loaded')\n                    span.md-txt.bold {{ valutesData_json_js.EUR.Value }}\n                  template(v-else)\n                    span.md-txt.bold 00\n\n\n        .md-card-wrapper\n          h2.md-title Курс доллара США (USD)\n          md-card.md-with-hover\n            md-ripple\n              .md-layout\n                .md-layout-item\n                  span.md-subtitle Дата\n                  span.md-txt {{ commonData.date }}\n\n                .md-layout-item.charcode-col\n                  span.md-subtitle Код\n                  template(v-if='valutesData_xml.loaded')\n                    span.md-txt {{ valutesData_xml.USD.CharCode[0] }}\n                  template(v-else-if='valutesData_json_js.loaded')\n                    span.md-txt {{ valutesData_json_js.USD.CharCode }}\n                  template(v-else)\n                    span.md-txt USD\n\n                .md-layout-item.nominal-col\n                  span.md-subtitle Номинал\n                  template(v-if='valutesData_xml.loaded')\n                    span.md-txt {{ valutesData_xml.EUR.Nominal[0] }}\n                  template(v-else-if='valutesData_json_js.loaded')\n                    span.md-txt {{ valutesData_json_js.EUR.Nominal }}\n                  template(v-else)\n                    span.md-txt -\n\n                .md-layout-item.value-col\n                  span.md-subtitle Курс\n                  template(v-if='valutesData_xml.loaded')\n                    span.md-txt.bold {{ valutesData_xml.USD.Value[0] }}\n                  template(v-else-if='valutesData_json_js.loaded')\n                    span.md-txt.bold {{ valutesData_json_js.USD.Value }}\n                  template(v-else)\n                    span.md-txt.bold 00\n</template>\n\n<script>\nconst axios       = require('axios'),\n      parseString = require('xml2js').parseString\n\nconst getSource = (arr, index, arrToPush, context) => {\n  console.log('Response');\n  axios\n    .get(arr[index], {\n      timeout: 60000\n    })\n    .then(res => {\n      if (res.headers['content-type'] === 'text/xml') {\n        parseString(res.data, (err, result) => {\n          if (result.ValCurs.Valute[11]) {\n            context.$set(context.valutesData_xml, 'EUR', result.ValCurs.Valute[11])\n          }\n\n          if (result.ValCurs.Valute[10]) {\n            context.$set(context.valutesData_xml, 'USD', result.ValCurs.Valute[10])\n          }\n          arrToPush.push(result)\n          context.valutesData_xml.loaded = true\n        })\n      }\n      \n      else {\n        if (res.data.Valute.EUR) {\n          context.$set(context.valutesData_json_js, 'EUR', res.data.Valute.EUR)\n        }\n\n        if (res.data.Valute.USD) {\n          context.$set(context.valutesData_json_js, 'USD', res.data.Valute.USD)\n        }\n        arrToPush.push(res.data)\n      }\n      context.valutesData_json_js.loaded = true\n    })\n    \n    .catch(error => {\n      if (index < arr.length - 1) {\n        return getSource(arr, index + 1, arrToPush, context);\n      }\n      throw error;\n    });\n\n  setTimeout(() => {\n    getSource(arr, index, arrToPush, context)\n  }, 2000)\n}\n\nexport default {\n  name: 'App',\n  data () {\n    return {\n      interval: null,\n      commonData: {\n        date: ''\n      },\n      valutesData_xml: {\n        loaded: false\n      },\n      valutesData_json_js: {\n        loaded: false\n      },\n      sourcesData: [],\n      sources: [\n        'https://www.cbr-xml-daily.ru/daily_utf8.xml',\n        'https://www.cbr-xml-daily.ru/daily_json.js'\n      ]\n    }\n  },\n\n  methods:{\n    dateFunction: (context) => {\n      const today       = new Date(),\n            currentDate = today.getDate()+'.'+(today.getMonth()+1)+'.'+today.getFullYear();\n\n      context.commonData.date = currentDate;\n    }\n  },\n\n  mounted: function() {\n    const self = this;\n\n    getSource(self.sources, 0, self.sourcesData, self);\n    this.dateFunction(self)\n  }\n}\n</script>\n\n<style lang='stylus'>\nbody\n  height 100%\n  font-family Roboto, sans-serif\n  -webkit-font-smoothing:antialiased\n  -moz-osx-font-smoothing grayscale\n\n#app\n  width 100%\n  height 100%\n  color #2c3e50\n\n.md-content\n  width 100%\n  height 100%\n  padding 40px\n\n.md-content-wrapper\n  display flex\n  flex-wrap wrap\n  grid-gap 20px\n\n.md-card-wrapper\n  width 400px\n\n.md-card\n  width 100%\n  display block\n\n.md-ripple\n  padding 10px\n\n.md-layout\n  grid-gap: 14px\n\n.charcode-col, .nominal-col\n  max-width 70px\n\n.md-title\n  margin 0 0 16px\n  color #000000\n\n.md-subtitle\n  width 100%\n  display inline-block\n  color #8D96B2\n  font-size 12px\n  line-height 12px\n\n.md-txt\n  width 100%\n  display inline-block\n  margin 6px 0 0\n  color #303030\n  font-size: 16px\n\n.bold\n  font-weight 600\n</style>\n"]}]}