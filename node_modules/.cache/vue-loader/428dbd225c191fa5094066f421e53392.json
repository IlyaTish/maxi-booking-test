{"remainingRequest":"/Users/ilyatish/Projects/maxi-booking-test/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ilyatish/Projects/maxi-booking-test/src/App.vue?vue&type=style&index=0&lang=stylus&","dependencies":[{"path":"/Users/ilyatish/Projects/maxi-booking-test/src/App.vue","mtime":1602742367316},{"path":"/Users/ilyatish/Projects/maxi-booking-test/node_modules/css-loader/dist/cjs.js","mtime":1594124138887},{"path":"/Users/ilyatish/Projects/maxi-booking-test/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1602678030223},{"path":"/Users/ilyatish/Projects/maxi-booking-test/node_modules/postcss-loader/src/index.js","mtime":1581966832902},{"path":"/Users/ilyatish/Projects/maxi-booking-test/node_modules/stylus-loader/index.js","mtime":1594123755981},{"path":"/Users/ilyatish/Projects/maxi-booking-test/node_modules/cache-loader/dist/cjs.js","mtime":1581966828116},{"path":"/Users/ilyatish/Projects/maxi-booking-test/node_modules/vue-loader/lib/index.js","mtime":1602678030223}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKYm9keQogIGhlaWdodCAxMDAlCiAgZm9udC1mYW1pbHkgUm9ib3RvLCBzYW5zLXNlcmlmCiAgLXdlYmtpdC1mb250LXNtb290aGluZzphbnRpYWxpYXNlZAogIC1tb3otb3N4LWZvbnQtc21vb3RoaW5nIGdyYXlzY2FsZQoKI2FwcAogIHdpZHRoIDEwMCUKICBoZWlnaHQgMTAwJQogIGNvbG9yICMyYzNlNTAKCi5tZC1jb250ZW50CiAgd2lkdGggMTAwJQogIGhlaWdodCAxMDAlCiAgcGFkZGluZyA0MHB4CgoubWQtY29udGVudC13cmFwcGVyCiAgZGlzcGxheSBmbGV4CiAgZmxleC13cmFwIHdyYXAKICBncmlkLWdhcCAyMHB4CgoubWQtY2FyZC13cmFwcGVyCiAgd2lkdGggNDAwcHgKCi5tZC1jYXJkCiAgd2lkdGggMTAwJQogIGRpc3BsYXkgYmxvY2sKCi5tZC1yaXBwbGUKICBwYWRkaW5nIDEwcHgKCi5tZC1sYXlvdXQKICBncmlkLWdhcDogMTRweAoKLmNoYXJjb2RlLWNvbCwgLm5vbWluYWwtY29sCiAgbWF4LXdpZHRoIDcwcHgKCi5tZC10aXRsZQogIG1hcmdpbiAwIDAgMTZweAogIGNvbG9yICMwMDAwMDAKCi5tZC1zdWJ0aXRsZQogIHdpZHRoIDEwMCUKICBkaXNwbGF5IGlubGluZS1ibG9jawogIGNvbG9yICM4RDk2QjIKICBmb250LXNpemUgMTJweAogIGxpbmUtaGVpZ2h0IDEycHgKCi5tZC10eHQKICB3aWR0aCAxMDAlCiAgZGlzcGxheSBpbmxpbmUtYmxvY2sKICBtYXJnaW4gNnB4IDAgMAogIGNvbG9yICMzMDMwMzAKICBmb250LXNpemU6IDE2cHgKCi5ib2xkCiAgZm9udC13ZWlnaHQgNjAwCg=="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwKA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template lang='pug'>\n  #app\n    md-content\n      .md-content-wrapper\n        .md-card-wrapper\n          h2.md-title Курс евро (EUR)\n          md-card.md-with-hover\n            md-ripple\n              .md-layout\n                .md-layout-item\n                  span.md-subtitle Дата\n                  span.md-txt {{ commonData.date }}\n\n                .md-layout-item.charcode-col\n                  span.md-subtitle Код\n                  template(v-if='valutesData_xml.loaded')\n                    span.md-txt {{ valutesData_xml.EUR.CharCode[0] }}\n                  template(v-else-if='valutesData_json_js.loaded')\n                    span.md-txt {{ valutesData_json_js.EUR.CharCode }}\n                  template(v-else)\n                    span.md-txt EUR\n\n                .md-layout-item.nominal-col\n                  span.md-subtitle Номинал\n                  template(v-if='valutesData_xml.loaded')\n                    span.md-txt {{ valutesData_xml.EUR.Nominal[0] }}\n                  template(v-else-if='valutesData_json_js.loaded')\n                    span.md-txt {{ valutesData_json_js.EUR.Nominal }}\n                  template(v-else)\n                    span.md-txt -\n\n                .md-layout-item.value-col\n                  span.md-subtitle Курс\n                  template(v-if='valutesData_xml.loaded')\n                    span.md-txt.bold {{ valutesData_xml.EUR.Value[0] }}\n                  template(v-else-if='valutesData_json_js.loaded')\n                    span.md-txt.bold {{ valutesData_json_js.EUR.Value }}\n                  template(v-else)\n                    span.md-txt.bold 00\n\n\n        .md-card-wrapper\n          h2.md-title Курс доллара США (USD)\n          md-card.md-with-hover\n            md-ripple\n              .md-layout\n                .md-layout-item\n                  span.md-subtitle Дата\n                  span.md-txt {{ commonData.date }}\n\n                .md-layout-item.charcode-col\n                  span.md-subtitle Код\n                  template(v-if='valutesData_xml.loaded')\n                    span.md-txt {{ valutesData_xml.USD.CharCode[0] }}\n                  template(v-else-if='valutesData_json_js.loaded')\n                    span.md-txt {{ valutesData_json_js.USD.CharCode }}\n                  template(v-else)\n                    span.md-txt USD\n\n                .md-layout-item.nominal-col\n                  span.md-subtitle Номинал\n                  template(v-if='valutesData_xml.loaded')\n                    span.md-txt {{ valutesData_xml.EUR.Nominal[0] }}\n                  template(v-else-if='valutesData_json_js.loaded')\n                    span.md-txt {{ valutesData_json_js.EUR.Nominal }}\n                  template(v-else)\n                    span.md-txt -\n\n                .md-layout-item.value-col\n                  span.md-subtitle Курс\n                  template(v-if='valutesData_xml.loaded')\n                    span.md-txt.bold {{ valutesData_xml.USD.Value[0] }}\n                  template(v-else-if='valutesData_json_js.loaded')\n                    span.md-txt.bold {{ valutesData_json_js.USD.Value }}\n                  template(v-else)\n                    span.md-txt.bold 00\n</template>\n\n<script>\nconst axios       = require('axios'),\n      parseString = require('xml2js').parseString\n\nconst getSource = (arr, index, arrToPush, context) => {\n  axios\n    .get(arr[index], {\n      timeout: 60000\n    })\n    .then(res => {\n      if (res.headers['content-type'] === 'text/xml') {\n        parseString(res.data, (err, result) => {\n          if (result.ValCurs.Valute[11]) {\n            context.$set(context.valutesData_xml, 'EUR', result.ValCurs.Valute[11])\n          }\n\n          if (result.ValCurs.Valute[10]) {\n            context.$set(context.valutesData_xml, 'USD', result.ValCurs.Valute[10])\n          }\n          arrToPush.push(result)\n          context.valutesData_xml.loaded = true\n        })\n      }\n      \n      else {\n        if (res.data.Valute.EUR) {\n          context.$set(context.valutesData_json_js, 'EUR', res.data.Valute.EUR)\n        }\n\n        if (res.data.Valute.USD) {\n          context.$set(context.valutesData_json_js, 'USD', res.data.Valute.USD)\n        }\n        arrToPush.push(res.data)\n      }\n      context.valutesData_json_js.loaded = true\n    })\n    \n    .catch(error => {\n      if (index < arr.length - 1) {\n        return getSource(arr, index + 1, arrToPush, context);\n      }\n      throw error;\n    });\n\n  setTimeout(() => {\n    getSource(arr, index, arrToPush, context)\n  }, 10000)\n}\n\nexport default {\n  name: 'App',\n  data () {\n    return {\n      interval: null,\n      commonData: {\n        date: ''\n      },\n      valutesData_xml: {\n        loaded: false\n      },\n      valutesData_json_js: {\n        loaded: false\n      },\n      sourcesData: [],\n      sources: [\n        'https://www.cbr-xml-daily.ru/daily_utf8.xml',\n        'https://www.cbr-xml-daily.ru/daily_json.js'\n      ]\n    }\n  },\n\n  methods:{\n    dateFunction: (context) => {\n      const today       = new Date(),\n            currentDate = today.getDate()+'.'+(today.getMonth()+1)+'.'+today.getFullYear();\n\n      context.commonData.date = currentDate;\n    }\n  },\n\n  mounted: function() {\n    const self = this;\n\n    getSource(self.sources, 0, self.sourcesData, self);\n    this.dateFunction(self)\n  }\n}\n</script>\n\n<style lang='stylus'>\nbody\n  height 100%\n  font-family Roboto, sans-serif\n  -webkit-font-smoothing:antialiased\n  -moz-osx-font-smoothing grayscale\n\n#app\n  width 100%\n  height 100%\n  color #2c3e50\n\n.md-content\n  width 100%\n  height 100%\n  padding 40px\n\n.md-content-wrapper\n  display flex\n  flex-wrap wrap\n  grid-gap 20px\n\n.md-card-wrapper\n  width 400px\n\n.md-card\n  width 100%\n  display block\n\n.md-ripple\n  padding 10px\n\n.md-layout\n  grid-gap: 14px\n\n.charcode-col, .nominal-col\n  max-width 70px\n\n.md-title\n  margin 0 0 16px\n  color #000000\n\n.md-subtitle\n  width 100%\n  display inline-block\n  color #8D96B2\n  font-size 12px\n  line-height 12px\n\n.md-txt\n  width 100%\n  display inline-block\n  margin 6px 0 0\n  color #303030\n  font-size: 16px\n\n.bold\n  font-weight 600\n</style>\n"]}]}